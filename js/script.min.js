"use strict";document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".first-slider"),t=document.querySelector(".arrival-slider"),s=document.querySelector(".second-day-slider"),r=document.querySelector(".avachinsky-slider"),i=document.querySelector(".vachkazhets-slider"),o=document.querySelector(".sea-trip-slider"),n=document.querySelector(".sea-ocean-slider"),l=document.querySelector(".helicopter-slider"),a=document.querySelector(".team-slider"),d=(new Swiper(e,{autoplay:{delay:3e3},loop:!0,slidesPerView:"auto",spaceBetween:35,centerSlides:!0,breakpoints:{320:{slidesPerView:1.3},450:{slidesPerView:2},640:{slidesPerView:3}},autoHeight:!0,grabCursor:!0,navigation:{nextEl:".first-slider-next",prevEl:".first-slider-prev"}}),new Swiper(t,{autoplay:{delay:3e3},loop:!0,slidesPerView:"auto",spaceBetween:30,centerSlides:!0,breakpoints:{320:{slidesPerView:1},450:{slidesPerView:1.5},768:{slidesPerView:2.5}},autoHeight:!0,grabCursor:!0,navigation:{nextEl:".arrival-slider-next",prevEl:".arrival-slider-prev"}}),new Swiper(s,{autoplay:{delay:3e3},loop:!0,slidesPerView:"auto",spaceBetween:30,centerSlides:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2.2},992:{slidesPerView:2.5}},autoHeight:!0,grabCursor:!0,navigation:{nextEl:".second-day-slider-next",prevEl:".second-day-slider-prev"}}),new Swiper(i,{autoplay:{delay:3e3},loop:!0,slidesPerView:"auto",spaceBetween:30,centerSlides:!1,breakpoints:{375:{slidesPerView:1},768:{slidesPerView:2.5}},autoHeight:!0,grabCursor:!0,navigation:{nextEl:".vachkazhets-slider-next",prevEl:".vachkazhets-slider-prev"}}),new Swiper(r,{autoplay:{delay:3e3},loop:!0,slidesPerView:"auto",spaceBetween:30,centerSlides:!0,breakpoints:{320:{slidesPerView:1},450:{slidesPerView:1.5},768:{slidesPerView:2.5}},autoHeight:!0,grabCursor:!0,navigation:{nextEl:".avachinsky-slider-next",prevEl:".avachinsky-slider-prev"}}),new Swiper(o,{autoplay:{delay:3e3},loop:!0,slidesPerView:"auto",spaceBetween:30,centerSlides:!0,breakpoints:{320:{slidesPerView:1},450:{slidesPerView:1.5},768:{slidesPerView:2.5}},autoHeight:!0,grabCursor:!0,navigation:{nextEl:".sea-trip-slider-next",prevEl:".sea-trip-slider-prev"}}),new Swiper(n,{autoplay:{delay:3e3},loop:!0,slidesPerView:"auto",spaceBetween:30,centerSlides:!0,breakpoints:{320:{slidesPerView:1},450:{slidesPerView:1.5},768:{slidesPerView:2.5}},autoHeight:!0,grabCursor:!0,navigation:{nextEl:".sea-ocean-slider-next",prevEl:".sea-ocean-slider-prev"}}),new Swiper(l,{autoplay:{delay:3e3},loop:!0,slidesPerView:"auto",spaceBetween:30,centerSlides:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2.2},992:{slidesPerView:2.5}},autoHeight:!0,grabCursor:!0,navigation:{nextEl:".helicopter-slider-next",prevEl:".helicopter-slider-prev"}}),new Swiper(a,{autoplay:{delay:3e3},loop:!0,slidesPerView:"auto",spaceBetween:35,centerSlides:!0,breakpoints:{320:{slidesPerView:1},767:{slidesPerView:2},992:{slidesPerView:3}},autoHeight:!1,grabCursor:!0,navigation:{nextEl:".team-slider-next",prevEl:".team-slider-prev"}}),document.querySelector(".menu__icon")),c=document.querySelector(".menu__body");d&&d.addEventListener("click",e=>{document.body.classList.toggle("_lock"),d.classList.toggle("_active"),c.classList.toggle("_active")});const u=document.querySelectorAll("._anim-items");window.addEventListener("scroll",(function e(){u.forEach(e=>{const t=e.offsetHeight,s=function(e){const t=e.getBoundingClientRect(),s=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+r,left:t.left+s}}(e).top;let r=window.innerHeight-t/4;t>window.innerHeight&&(r=window.innerHeight-window.innerHeight/4);const i=window.pageYOffset>s-r,o=window.pageYOffset<s+t;i&&o?e.classList.add("_active"):e.classList.contains("_anim-no-hide")||e.classList.remove("_active")}),setTimeout(()=>e(),600)}));const p=document.querySelectorAll(".popup-link"),w=document.querySelector("body"),m=document.querySelectorAll(".close-popup");let v=!0;function y(e){if(e&&v){const t=document.querySelector(".popup.open");t?g(t,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";w.style.paddingRight=e,w.classList.add("lock"),v=!1,setTimeout(()=>v=!0,800)}(),e.classList.add("open"),e.addEventListener("click",e=>{e.target.closest(".popup__inner")||g(e.target.closest(".popup"))})}}function g(e,t=!0){v&&(e.classList.remove("open"),t&&(setTimeout(()=>{w.style.paddingRight="0px",w.classList.remove("lock")},800),v=!1,setTimeout(()=>v=!0,800)))}p.forEach(e=>{e.addEventListener("click",t=>{const s=e.getAttribute("href").replace("#",""),r=document.getElementById(s);console.log(r),y(r),t.preventDefault()})}),m.forEach(e=>{e.addEventListener("click",t=>{g(e.closest(".popup")),t.preventDefault()})}),document.addEventListener("keydown",e=>{if("Escape"===e.code){g(document.querySelector(".popup.open"))}});const S=document.querySelector(".number"),f=document.forms.form;S.addEventListener("click",e=>e.target.classList.contains("number__plus")?quantity.stepUp():quantity.stepDown());const h=e=>{e.classList.add("_error"),e.parentElement.classList.add("_error")},E=e=>{let t=0;return document.querySelectorAll("._req").forEach(e=>{(e=>{e.classList.remove("_error"),e.parentElement.classList.remove("_error")})(e),e.classList.contains("_email")?(e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.value).toLowerCase()))(e)||(h(e),t++):""===e.value&&(h(e),t++)}),t};f.addEventListener("submit",async e=>{e.preventDefault();const t=document.querySelector("#email"),s=document.querySelector("#quantity"),r=document.querySelector("#date"),i=document.querySelector("#message"),o=document.querySelector("#name"),n=document.querySelector('input[name="tariff"]:checked'),l={email:t.value,name:o.value,date:r.value,message:i.value,tariff:n.value,quantity:s.value};if(E())alert("Заполните необходимые поля. ");else{f.classList.add("_sending");(await fetch("/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(l)})).ok?(alert("Заявка успешно отправлена!"),f.reset(),f.classList.remove("_sending")):alert("Упс, что-то пошло не так!")}})});